<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:nova="clr-namespace:Nova.Avalonia.UI.Controls;assembly=Nova.Avalonia.UI"
             xmlns:vm="using:Nova.Avalonia.UI.Gallery.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="Nova.Avalonia.UI.Gallery.Views.ResponsivePanelView"
             x:DataType="vm:ResponsivePanelViewModel">

    <ScrollViewer HorizontalScrollBarVisibility="Disabled">
        <StackPanel Spacing="20" Margin="20">
            <TextBlock Text="An adaptive layout panel that toggles visibility of children based on breakpoints." Theme="{StaticResource BodyTextBlockStyle}" Opacity="0.6"/>

            <!-- Window Resizing Demo -->
            <Border BorderBrush="{DynamicResource AccentMutedBrush}" BorderThickness="2" Padding="15" CornerRadius="8">
                <StackPanel Spacing="10">
                     <TextBlock Text="Window Resizing" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource AccentBrush}"/>
                     <TextBlock Text="Resize the application window to see this panel adapt." Foreground="{DynamicResource SecondaryTextBrush}"/>
                     
                    <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="4" Padding="20" ClipToBounds="True">
                        <nova:ResponsivePanel>
                            <Border nova:ResponsivePanel.Condition="Narrow" 
                                    Background="#E74C3C" CornerRadius="4" Margin="5" Padding="10" Height="60">
                                <TextBlock Text="Mobile (&lt; 600px)" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            </Border>
                            
                            <Border nova:ResponsivePanel.Condition="Normal" 
                                    Background="#2ECC71" CornerRadius="4" Margin="5" Padding="10" Height="60">
                                <TextBlock Text="Tablet (600px - 900px)" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            </Border>
                            
                            <Border nova:ResponsivePanel.Condition="Wide" 
                                    Background="#3498DB" CornerRadius="4" Margin="5" Padding="10" Height="60">
                                <TextBlock Text="Desktop (&gt; 900px)" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            </Border>
                        </nova:ResponsivePanel>
                    </Border>
                </StackPanel>
            </Border>

            <!-- Basic Usage -->
            <Border BorderBrush="{DynamicResource AccentMutedBrush}" BorderThickness="2" Padding="15" CornerRadius="8">
                <StackPanel Spacing="10">
                    <Grid ColumnDefinitions="*, Auto">
                        <StackPanel Spacing="5">
                             <TextBlock Text="Basic Usage" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource AccentBrush}"/>
                             <TextBlock Text="Items are automatically shown or hidden based on the available width." Foreground="{DynamicResource SecondaryTextBrush}"/>
                        </StackPanel>
                        <!-- Local Slider for Basic Usage -->
                         <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Spacing="10">
                            <TextBlock Text="{Binding #BasicWidthSlider.Value, StringFormat='Width: \{0:0\}px'}" VerticalAlignment="Center" FontWeight="Bold" Width="100" TextAlignment="Right"/>
                            <Slider x:Name="BasicWidthSlider" Minimum="350" Maximum="1400" Value="650" Width="200"/>
                        </StackPanel>
                    </Grid>
                   
                    
                    <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="4" Padding="20" ClipToBounds="True">
                        <StackPanel Spacing="10">
                            <!-- Visualizer -->
                            <Border Width="{Binding #BasicWidthSlider.Value}" 
                                     Height="80"
                                     HorizontalAlignment="Center"
                                     Background="{DynamicResource SystemRegionBrush}"
                                     BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                                     BorderThickness="1"
                                     CornerRadius="4">
                                <nova:ResponsivePanel Transition="{Binding SelectedTransition.Transition}">
                                    <Border nova:ResponsivePanel.Condition="Narrow" 
                                            Background="#E74C3C" CornerRadius="4" Margin="5" Padding="10">
                                        <TextBlock Text="Mobile (&lt; 600px)" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                                    </Border>
                                    
                                    <Border nova:ResponsivePanel.Condition="Normal" 
                                            Background="#2ECC71" CornerRadius="4" Margin="5" Padding="10">
                                        <TextBlock Text="Tablet (600px - 900px)" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                                    </Border>
                                    
                                    <Border nova:ResponsivePanel.Condition="Wide" 
                                            Background="#3498DB" CornerRadius="4" Margin="5" Padding="10">
                                        <TextBlock Text="Desktop (&gt; 900px)" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                                    </Border>
                                </nova:ResponsivePanel>
                            </Border>

                            <!-- Legend/Info -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="20">
                                <StackPanel Orientation="Horizontal" Spacing="5">
                                    <Ellipse Width="10" Height="10" Fill="#E74C3C"/>
                                    <TextBlock Text="Mobile"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Spacing="5">
                                    <Ellipse Width="10" Height="10" Fill="#2ECC71"/>
                                    <TextBlock Text="Tablet"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Spacing="5">
                                    <Ellipse Width="10" Height="10" Fill="#3498DB"/>
                                    <TextBlock Text="Desktop"/>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>

            <!-- Interactive -->
            <Border BorderBrush="{DynamicResource AccentMutedBrush}" BorderThickness="2" Padding="15" CornerRadius="8">
                <StackPanel Spacing="10">
                    <TextBlock Text="Interactive" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource AccentBrush}"/>
                    <TextBlock Text="Use the slider to simulate container width and see the layout adapt. Try different transition effects." Foreground="{DynamicResource SecondaryTextBrush}"/>
                    
                    <!-- Configuration Controls -->
                    <StackPanel Spacing="10" Margin="0,0,0,10">
                        <!-- Width Slider Row -->
                        <Grid ColumnDefinitions="80, *">
                            <TextBlock Text="{Binding #InteractWidthSlider.Value, StringFormat='Width: \{0:0\}px'}" VerticalAlignment="Center" FontWeight="Bold"/>
                            <Slider Grid.Column="1" x:Name="InteractWidthSlider" Minimum="350" Maximum="1400" Value="650"/>
                        </Grid>
                        <!-- Transition Selector Row -->
                        <Grid ColumnDefinitions="80, *">
                            <TextBlock Text="Transition:" VerticalAlignment="Center"/>
                            <ComboBox Grid.Column="1" ItemsSource="{Binding Transitions}" SelectedItem="{Binding SelectedTransition}" HorizontalAlignment="Left" MinWidth="150"/>
                        </Grid>
                    </StackPanel>

                    <!-- Simulation Container -->
                    <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="4" Padding="20" MinHeight="500" ClipToBounds="True">
                         <!-- Center the content but allow it to expand -->
                         <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled" HorizontalAlignment="Center">
                             <Border Width="{Binding #InteractWidthSlider.Value}" 
                                     Height="600"
                                     Background="{DynamicResource SystemRegionBrush}"
                                     BoxShadow="0 4 20 0 #40000000"
                                     CornerRadius="12" ClipToBounds="True"
                                     VerticalAlignment="Top">
                                 
                                <nova:ResponsivePanel Transition="{Binding SelectedTransition.Transition}">
                                    
                                    <!-- ============================================== -->
                                    <!-- MOBILE VIEW (List Only) -->
                                    <!-- ============================================== -->
                                    <Grid nova:ResponsivePanel.Condition="Narrow" RowDefinitions="Auto, *, Auto">
                                        <!-- Mobile Header -->
                                        <Border Grid.Row="0" Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}" Height="60" Padding="15">
                                            <Grid ColumnDefinitions="Auto, *, Auto">
                                                <TextBlock Text="Inbox" VerticalAlignment="Center" FontSize="20" FontWeight="Bold"/>
                                                <Ellipse Grid.Column="2" Width="30" Height="30" Fill="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                                            </Grid>
                                        </Border>

                                        <!-- Mobile List -->
                                        <StackPanel Grid.Row="1" Margin="10" Spacing="10">
                                            <Border Classes="Card" Padding="15" Background="{DynamicResource SystemControlBackgroundAltHighBrush}" CornerRadius="8">
                                                <StackPanel>
                                                    <TextBlock Text="Alice Smith" FontWeight="Bold"/>
                                                    <TextBlock Text="Project Update: Q1 Goals..." Opacity="0.7"/>
                                                </StackPanel>
                                            </Border>
                                            <Border Classes="Card" Padding="15" Background="{DynamicResource SystemControlBackgroundAltHighBrush}" CornerRadius="8">
                                                <StackPanel>
                                                    <TextBlock Text="Bob Jones" FontWeight="Bold"/>
                                                    <TextBlock Text="Lunch tomorrow?" Opacity="0.7"/>
                                                </StackPanel>
                                            </Border>
                                             <Border Classes="Card" Padding="15" Background="{DynamicResource SystemControlBackgroundAltHighBrush}" CornerRadius="8">
                                                <StackPanel>
                                                    <TextBlock Text="Marketing Team" FontWeight="Bold"/>
                                                    <TextBlock Text="New Campaign Assets" Opacity="0.7"/>
                                                </StackPanel>
                                            </Border>
                                        </StackPanel>

                                        <!-- Mobile Bottom Nav -->
                                        <Border Grid.Row="2" Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}" Height="60" Padding="20,0">
                                            <Grid ColumnDefinitions="*,*,*">
                                                <PathIcon Data="M19,15H15A3,3 0 0,1 12,18A3,3 0 0,1 9,15H5V5H19M19,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3Z" 
                                                          HorizontalAlignment="Center" VerticalAlignment="Center" Width="24" Height="24"/>
                                                
                                                <PathIcon Grid.Column="1" Data="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" 
                                                          HorizontalAlignment="Center" VerticalAlignment="Center" Width="24" Height="24"/>
                                                
                                                <PathIcon Grid.Column="2" Data="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.35 19.43,11.03L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11.03C4.53,11.35 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.04 4.95,18.95L7.44,17.95C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.95L19.05,18.95C19.27,19.04 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" 
                                                          HorizontalAlignment="Center" VerticalAlignment="Center" Width="24" Height="24"/>
                                            </Grid>
                                        </Border>
                                    </Grid>

                                    <!-- ============================================== -->
                                    <!-- TABLET VIEW (Split: 1/3 List, 2/3 Detail) -->
                                    <!-- ============================================== -->
                                    <Grid nova:ResponsivePanel.Condition="Normal" ColumnDefinitions="250, *">
                                        <!-- Sidebar List -->
                                        <Border Grid.Column="0" Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}" Padding="0,20,0,0">
                                            <StackPanel Spacing="0">
                                                <TextBlock Text="Inbox" FontSize="24" FontWeight="Bold" Margin="20,0,0,20"/>
                                                
                                                <Border Background="{DynamicResource SystemAccentColor}" Padding="20,15">
                                                    <StackPanel>
                                                        <TextBlock Text="Alice Smith" FontWeight="Bold" Foreground="White"/>
                                                        <TextBlock Text="Project Update..." Foreground="White" Opacity="0.8"/>
                                                    </StackPanel>
                                                </Border>
                                                <Border Padding="20,15">
                                                    <StackPanel>
                                                        <TextBlock Text="Bob Jones" FontWeight="Bold"/>
                                                        <TextBlock Text="Lunch tomorrow?" Opacity="0.7"/>
                                                    </StackPanel>
                                                </Border>
                                            </StackPanel>
                                        </Border>

                                        <!-- Detail View -->
                                        <Grid Grid.Column="1" RowDefinitions="Auto, *">
                                             <Border Grid.Row="0" BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}" BorderThickness="0,0,0,1" Padding="30">
                                                 <StackPanel Spacing="5">
                                                     <TextBlock Text="Project Update: Q1 Goals" FontSize="24" FontWeight="SemiBold"/>
                                                     <Grid ColumnDefinitions="Auto, *">
                                                         <Ellipse Width="30" Height="30" Fill="Gray"/>
                                                         <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                                             <TextBlock Text="Alice Smith &lt;alice@example.com&gt;"/>
                                                             <TextBlock Text="To: You" FontSize="12" Opacity="0.6"/>
                                                         </StackPanel>
                                                     </Grid>
                                                 </StackPanel>
                                             </Border>
                                             <TextBlock Grid.Row="1" Margin="30" Text="Hey team, here are the updates for Q1..." TextWrapping="Wrap"/>
                                        </Grid>
                                    </Grid>

                                    <!-- ============================================== -->
                                    <!-- DESKTOP VIEW (3 Cols: Folders, List, Detail) -->
                                    <!-- ============================================== -->
                                    <Grid nova:ResponsivePanel.Condition="Wide" ColumnDefinitions="200, 300, *">
                                        <!-- Nav Rail -->
                                        <Border Grid.Column="0" Background="{DynamicResource SystemChromeMediumLowColor}" Padding="10,20">
                                            <StackPanel Spacing="5">
                                                <Button HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Background="Transparent" BorderThickness="0">
                                                    <StackPanel Orientation="Horizontal" Spacing="15">
                                                        <PathIcon Data="M19,15H15A3,3 0 0,1 12,18A3,3 0 0,1 9,15H5V5H19M19,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3Z" 
                                                                  Foreground="White" Width="20" Height="20" VerticalAlignment="Center"/>
                                                        <TextBlock Text="Inbox" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                                                    </StackPanel>
                                                </Button>
                                                <Button HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Background="Transparent" BorderThickness="0">
                                                    <StackPanel Orientation="Horizontal" Spacing="15">
                                                        <PathIcon Data="M2,21L23,12L2,3V10L17,12L2,14V21Z" 
                                                                  Foreground="White" Width="20" Height="20" VerticalAlignment="Center"/>
                                                        <TextBlock Text="Sent" Foreground="#CCFFFFFF" VerticalAlignment="Center"/>
                                                    </StackPanel>
                                                </Button>
                                                <Button HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Background="Transparent" BorderThickness="0">
                                                    <StackPanel Orientation="Horizontal" Spacing="15">
                                                        <PathIcon Data="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z" 
                                                                  Foreground="White" Width="20" Height="20" VerticalAlignment="Center"/>
                                                        <TextBlock Text="Trash" Foreground="#CCFFFFFF" VerticalAlignment="Center"/>
                                                    </StackPanel>
                                                </Button>
                                            </StackPanel>
                                        </Border>

                                        <!-- Message List -->
                                        <Border Grid.Column="1" Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}" BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}" BorderThickness="0,0,1,0">
                                            <StackPanel>
                                                <TextBlock Text="Inbox" FontWeight="Bold" Margin="20" FontSize="18"/>
                                                <!-- Selected Item -->
                                                <Border Background="White" Margin="10,0" Padding="15" CornerRadius="6" BoxShadow="0 2 4 0 #20000000">
                                                    <StackPanel>
                                                        <TextBlock Text="Alice Smith" FontWeight="Bold" Foreground="Black"/>
                                                        <TextBlock Text="Project Update..." Foreground="Black" Opacity="0.7" TextTrimming="CharacterEllipsis"/>
                                                    </StackPanel>
                                                </Border>
                                                <Border Padding="15" Margin="10,0">
                                                    <StackPanel>
                                                        <TextBlock Text="Bob Jones" FontWeight="Bold"/>
                                                        <TextBlock Text="Lunch tomorrow?" Opacity="0.7" TextTrimming="CharacterEllipsis"/>
                                                    </StackPanel>
                                                </Border>
                                            </StackPanel>
                                        </Border>

                                        <!-- Reading Pane -->
                                        <Grid Grid.Column="2" RowDefinitions="Auto, *">
                                             <Border Grid.Row="0" Padding="40" Background="{DynamicResource SystemRegionBrush}">
                                                 <StackPanel Spacing="10">
                                                     <TextBlock Text="Project Update: Q1 Goals" FontSize="28" FontWeight="Bold"/>
                                                     <StackPanel Orientation="Horizontal" Spacing="10">
                                                         <Border Background="Red" CornerRadius="15" Padding="10,5">
                                                             <TextBlock Text="Important" Foreground="White" FontSize="12"/>
                                                         </Border>
                                                         <Border Background="Blue" CornerRadius="15" Padding="10,5">
                                                             <TextBlock Text="Work" Foreground="White" FontSize="12"/>
                                                         </Border>
                                                     </StackPanel>
                                                 </StackPanel>
                                             </Border>
                                             <TextBlock Grid.Row="1" Margin="40" FontSize="16"  Text="Hey team,&#x0a;&#x0a;Here are the updates for Q1. We are aiming to launch the new feature by March. Please review the attached specs.&#x0a;&#x0a;Best,&#x0a;Alice" TextWrapping="Wrap"/>
                                        </Grid>
                                    </Grid>

                                </nova:ResponsivePanel>
                             </Border>
                         </ScrollViewer>
                    </Border>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
